(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{364:function(t,e,a){t.exports=a.p+"assets/img/JsBridge.55672234.png"},401:function(t,e,a){"use strict";a.r(e);var s=a(42),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"hybrid开发相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hybrid开发相关"}},[t._v("#")]),t._v(" Hybrid开发相关")]),t._v(" "),s("blockquote",[s("p",[t._v("所谓的Hybrid开发就是一层原生App（Native）的的壳，WebView 内嵌 H5。")])]),t._v(" "),s("p",[t._v("Hybrid从开发层面实现“一次开发，多处运行”的机制（开发效率高、跨平台、低层本）。")]),t._v(" "),s("p",[t._v("Hybrid从业务开发上讲，没有版本问题，有BUG能及时修复")]),t._v(" "),s("p",[t._v("与Native交互：")]),t._v(" "),s("ul",[s("li",[t._v("URL Schema\n"),s("ul",[s("li",[t._v("JSBridge")])])]),t._v(" "),s("li",[t._v("Native注入Javascript")])]),t._v(" "),s("h3",{attrs:{id:"url-schema"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#url-schema"}},[t._v("#")]),t._v(" URL Schema")]),t._v(" "),s("p",[t._v("URL Schema交互其实是WebView的URL拦截。拦截某些特定的URL.startWith('xxx')")]),t._v(" "),s("p",[t._v("比如携程H5页面要去到酒店Native某一个页面可以这样：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    // schema://forward?t=1446297653344&param=%7B%22topage%22%3A%22hotel%2Fdetail%20%20%22%2C%22type%22%3A%22h2n%22%2C%22id%22%3A20151031%7D\n    \n    // 其实就是拦截了 schema://forward 开头的URL\n")])])]),s("h3",{attrs:{id:"jsbridge"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jsbridge"}},[t._v("#")]),t._v(" JSBridge")]),t._v(" "),s("p",[t._v("JSBridge 其实是是URL Schema的升级版：")]),t._v(" "),s("p",[t._v("H5 通过某种方式触发一个url -> Native捕获到url,进行处理 -> Native调用H5的JSBridge对象传递回调（执行Javascript方法）。")]),t._v(" "),s("p",[t._v("比如调用Native相机+人脸识别，并获取人脸识别结果")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    fnAbc() {\n        return new Promise((resolve, reject) => {\n\n            // 回调完成，返回数据\n            window.livenessComplete =  (res) => {\n                if (res && res.status === '0') {\n                    resolve(res.data)\n                } else {\n                    reject('fail')\n                }\n            }\n\n            // 使用JSBridge\n            Bridge.liveness(JSON.stringify({ \"callBack\": \"livenessComplete\" }))\n\n        })\n    }\n")])])]),s("p",[t._v("附上JsBridge原理图")]),t._v(" "),s("p",[s("img",{attrs:{src:a(364),alt:"../img/JsBridge.png"}})]),t._v(" "),s("h3",{attrs:{id:"通过ua获取数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过ua获取数据"}},[t._v("#")]),t._v(" 通过UA获取数据")]),t._v(" "),s("p",[t._v("首先，需要APp端自定义 user-agent （navigator.userAgent）")]),t._v(" "),s("p",[t._v("附：UA是无法通过JS直接修改的")]),t._v(" "),s("h3",{attrs:{id:"js-判断访问终端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js-判断访问终端"}},[t._v("#")]),t._v(" JS 判断访问终端")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    var browser={\n        versions: function(){\n            var u = navigator.userAgent, \n            app = navigator.appVersion;\n            return {\n                trident: u.indexOf('Trident') > -1, //IE内核\n                presto: u.indexOf('Presto') > -1, //opera内核\n                webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核\n                gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1,//火狐内核\n                mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端\n                ios: !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端\n                android: u.indexOf('Android') > -1 || u.indexOf('Adr') > -1, //android终端\n                iPhone: u.indexOf('iPhone') > -1 , //是否为iPhone或者QQHD浏览器\n                iPad: u.indexOf('iPad') > -1, //是否iPad\n                webApp: u.indexOf('Safari') == -1, //是否web应该程序，没有头部与底部\n                weixin: u.indexOf('MicroMessenger') > -1, //是否微信 （2015-01-22新增）\n                qq: u.match(/\\sQQ/i) == \" qq\" //是否QQ\n            };\n        }(),\n        language:(navigator.browserLanguage || navigator.language).toLowerCase()\n    }\n")])])]),s("h3",{attrs:{id:"移动端调试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#移动端调试"}},[t._v("#")]),t._v(" 移动端调试")]),t._v(" "),s("p",[t._v("可以使用腾讯开源的"),s("code",[t._v("vConsole")]),t._v("进行调试（兼容到安卓 4.4）")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/Tencent/vConsole",target:"_blank",rel:"noopener noreferrer"}},[t._v("下载 vConsole"),s("OutboundLink")],1),t._v("，实例化就能使用")]),t._v(" "),s("li",[t._v("或：使用webpack插件"),s("code",[t._v("vconsole-webpack-plugin")]),t._v("（兼容到安卓5）")])]),t._v(" "),s("p",[t._v("其他调试方式")]),t._v(" "),s("ul",[s("li",[t._v("如果有真机，可以使用 "),s("code",[t._v("fiddler")]),t._v(" 进行真机调试")]),t._v(" "),s("li",[t._v("如果没有真机，可以使用 "),s("code",[t._v("xCode")]),t._v(" 或 "),s("code",[t._v("Android Studio")]),t._v("的虚拟机进行调试\n"),s("ul",[s("li",[t._v("虚拟机推荐使用 MuMu 模拟器，比 Android Studio 要快")]),t._v(" "),s("li",[t._v("虚拟机联网开通 "),s("code",[t._v("inspect")]),t._v(" 需要运行 "),s("code",[t._v("adb connect 127.0.0.1:7555")])]),t._v(" "),s("li",[t._v("在 "),s("code",[t._v("inspect")]),t._v(" 中如果页面 "),s("code",[t._v("404")]),t._v("，则需要使用梯子")])])]),t._v(" "),s("li",[s("strong",[t._v("无论是虚拟机还是真机，都可以使用Chrome自带的inspect打开调试模式调试。")])]),t._v(" "),s("li",[t._v("当然也可以使用"),s("a",{attrs:{href:"https://github.com/wuchangming/spy-debugger",target:"_blank",rel:"noopener noreferrer"}},[t._v("spy-debugger"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("inspect打开方式：Chrome输入链接 "),s("RouterLink",{attrs:{to:"chrome://inspect/#devices"}},[t._v("chrome://inspect/#devices")])],1),t._v(" "),s("h3",{attrs:{id:"hammer-使用swipeup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hammer-使用swipeup"}},[t._v("#")]),t._v(" hammer 使用swipeup")]),t._v(" "),s("p",[t._v("hammer 默认禁止了"),s("code",[t._v("swipeup")]),t._v("，使用 "),s("code",[t._v("swipeup")]),t._v(" 需要")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" hammer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Hammer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ele"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    hammer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'swipe'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" direction"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Hammer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DIRECTION_ALL")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    hammer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"swipeup swipeleft"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...略")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"禁用-ios-长按下载图片"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#禁用-ios-长按下载图片"}},[t._v("#")]),t._v(" 禁用 IOS 长按下载图片")]),t._v(" "),s("p",[t._v("IOS在Hybrid中默认还是用 长按下载图片的，Android正常。")]),t._v(" "),s("p",[t._v("禁止 IOS 长按功能")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    -webkit-touch-callout:none;\n")])])]),s("h3",{attrs:{id:"ios-自动识别电话问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ios-自动识别电话问题"}},[t._v("#")]),t._v(" IOS 自动识别电话问题")]),t._v(" "),s("p",[t._v("Safari 会对那些看起来像是电话号码的数字处理为电话链接")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[t._v("    // 关闭识别\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("format-detection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("telephone=no"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n    // 开启识别\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("tel:123456"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("123456"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h3",{attrs:{id:"点击产生黑框问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#点击产生黑框问题"}},[t._v("#")]),t._v(" 点击产生黑框问题")]),t._v(" "),s("div",{staticClass:"language-css extra-class"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("body")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("-webkit-tap-highlight-color")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rgba")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"点击延迟问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#点击延迟问题"}},[t._v("#")]),t._v(" 点击延迟问题")]),t._v(" "),s("p",[t._v("使用 "),s("code",[t._v("fastclick.js")]),t._v(" 可以解决在手机上点击事件的300ms延迟")]),t._v(" "),s("h3",{attrs:{id:"input-type-file-相机和相册问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#input-type-file-相机和相册问题"}},[t._v("#")]),t._v(' input type="file" 相机和相册问题')]),t._v(" "),s("p",[t._v("2个属性的坑："),s("code",[t._v('accept="image/*"')]),t._v(" 和 "),s("code",[t._v('capture="camera"')])]),t._v(" "),s("p",[t._v("关于"),s("code",[t._v('capture="camera"')]),t._v(" 一般情况下：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Android")]),t._v("系统：input"),s("code",[t._v('加上capture="camera"')]),t._v("，可以调用相机+相册\n"),s("ul",[s("li",[t._v("android可以同时使用2个属性")])])]),t._v(" "),s("li",[s("code",[t._v("ios")]),t._v("系统：input"),s("code",[t._v("去掉capture属性")]),t._v("，可以调用相机 +相册\n"),s("ul",[s("li",[t._v("如果加上"),s("code",[t._v('capture="camera"')]),t._v(" 只调相机")])])])]),t._v(" "),s("p",[t._v("关于"),s("code",[t._v('accept="image/*"')])]),t._v(" "),s("ul",[s("li",[t._v("如果限制图片枚举不够，会出现Android无法调用相册的情况。")]),t._v(" "),s("li",[t._v("推荐用"),s("code",[t._v('accept="image/*"')])])]),t._v(" "),s("h3",{attrs:{id:"swiper-库相关问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#swiper-库相关问题"}},[t._v("#")]),t._v(" Swiper 库相关问题")]),t._v(" "),s("ul",[s("li",[t._v("使用动态数据，页面就无法滑动\n"),s("ul",[s("li",[t._v("解决办法:   就是添加一个 "),s("code",[t._v("observer")]),t._v(" 属性")])])]),t._v(" "),s("li",[t._v("使用v-if条件，swiper界面混乱，且无法进行切换\n"),s("ul",[s("li",[t._v("解决办法：添加 "),s("code",[t._v("observeParents")]),t._v(" 属性")])])])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    observer:true,\n    observeParents:true,\n")])])]),s("h2",{attrs:{id:"相关bug"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#相关bug"}},[t._v("#")]),t._v(" 相关BUG")]),t._v(" "),s("h3",{attrs:{id:"ios-默认滚动卡顿"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ios-默认滚动卡顿"}},[t._v("#")]),t._v(" IOS 默认滚动卡顿")]),t._v(" "),s("p",[t._v("在滚动容器上添加")]),t._v(" "),s("div",{staticClass:"language-css extra-class"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".warp")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("-webkit-overflow-scrolling")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" touch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"ios-placeholder在input上部"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ios-placeholder在input上部"}},[t._v("#")]),t._v(" IOS placeholder在input上部")]),t._v(" "),s("p",[t._v("解决方案：")]),t._v(" "),s("ol",[s("li",[t._v("chrome浏览器展示 DOM 的隐藏项")]),t._v(" "),s("li",[t._v("步骤：chrome -> "),s("code",[t._v("setting")]),t._v(" -> "),s("code",[t._v("preferences")]),t._v(" -> "),s("code",[t._v("Elements")]),t._v(" -> 勾选 "),s("code",[t._v("Show user agent shadow DOM")])]),t._v(" "),s("li",[t._v("检查 placeholder 的DOM元素和 input的DOM元素高度，")]),t._v(" "),s("li",[t._v("设置 placeholder 的 "),s("code",[t._v("line-light")]),t._v(" 使用顶部和 input顶部一致")])]),t._v(" "),s("h3",{attrs:{id:"ios-键盘弹出问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ios-键盘弹出问题"}},[t._v("#")]),t._v(" IOS 键盘弹出问题")]),t._v(" "),s("blockquote",[s("p",[t._v("IOS键盘弹出后，是覆盖式的。安卓是上推式的。")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    const ua = navigator.userAgent;\n\n    const isAndroid = ua.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端\n    const isiOS = !!ua.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端\n\n    // 监听键盘收起及弹出状态\n    document.body.addEventListener('focusout', () => {\n        if (isiOS) {\n            setTimeout(() => {\n            document.body.scrollTop = document.body.scrollHeight\n            }, 100)\n        }\n    })\n\n    document.body.addEventListener('focusin', () => {\n        if (isiOS) {\n            setTimeout(() => {\n            document.body.scrollTop = document.body.scrollHeight\n            }, 100)\n        }\n    })\n")])])]),s("h3",{attrs:{id:"ios-键盘弹出问题-2-（在webview中bug）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ios-键盘弹出问题-2-（在webview中bug）"}},[t._v("#")]),t._v(" IOS 键盘弹出问题 2 （在WebView中BUG）")]),t._v(" "),s("p",[t._v("在IOS中系统键盘弹出后，webview会弹到上边不回来了。（这个要看Native端，反正我用Flutter没问题，但是在公司某App的Hybrid开发中遇到了）")]),t._v(" "),s("p",[t._v("导致的BUG：webview内部touch等事件的位置不正确")]),t._v(" "),s("p",[t._v("解决方案：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    // @ts-ignore 元素blur的时候，回到可视区，使用了事件捕获,\n    document.addEventListener(\n        'blur', \n        // () => (IS_IOS && document.activeElement.scrollIntoViewIfNeeded(true)),\n        () => IS_IOS && window.scrollBy({left: 0,top: 1}),\n        true\n    );\n")])])]),s("h3",{attrs:{id:"ios-new-date-的兼容性bug"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ios-new-date-的兼容性bug"}},[t._v("#")]),t._v(" IOS new Date 的兼容性BUG")]),t._v(" "),s("blockquote",[s("p",[t._v("在不同的浏览器上：不支持中横线("),s("code",[t._v("-")]),t._v(")这种时间，得改为斜杠("),s("code",[t._v("/")]),t._v(")")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    new Date('2019-07-26 24:00:00'); // 有兼容性问题\n\n    new Date('2019/07/26 24:00:00'); // 没有兼容性问题\n\n")])])]),s("h3",{attrs:{id:"ios-子元素滚动传播到父元素的情况"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ios-子元素滚动传播到父元素的情况"}},[t._v("#")]),t._v(" IOS 子元素滚动传播到父元素的情况")]),t._v(" "),s("blockquote",[s("p",[t._v("会出现 dialog滚动到尽头时body滚动的情况 的BUG")])]),t._v(" "),s("p",[t._v("解决方案 一：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    var mo = function (e) { e.preventDefault() }\n\n    // 禁止页面滑动\n    Vue.prototype.$banScroll = function () {\n        // 禁止body滚动\n        document.body.style.overflow = 'hidden';\n        // 禁用原生下拉刷新\n        document.addEventListener('touchmove', mo, false);\n    }\n\n    // 出现滚动条\n    Vue.prototype.$canScroll = function () {\n        // 恢复body滚动\n        document.body.style.overflow = '';\n        // 恢复原生下拉刷新\n        document.removeEventListener('touchmove', mo, false);\n    }\n")])])]),s("p",[t._v("解决方案 二:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    .box {\n        overscroll-behavior: contain; // 阻止滚动传播\n    }\n")])])]),s("p",[t._v("ps: overscroll-behavior 的兼容性并没有太好")]),t._v(" "),s("p",[t._v("参考 "),s("a",{attrs:{href:"https://www.caniuse.com/#search=overscroll-behavior",target:"_blank",rel:"noopener noreferrer"}},[t._v("can i use"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("解决方案 三:")]),t._v(" "),s("p",[t._v("阻止默认事件"),s("code",[t._v("preventDefault()")])]),t._v(" "),s("h3",{attrs:{id:"ios-正则bug"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ios-正则bug"}},[t._v("#")]),t._v(" IOS 正则BUG")]),t._v(" "),s("p",[t._v("IOS 不支持零宽断言：")]),t._v(" "),s("ul",[s("li",[t._v("零宽断言，比如："),s("code",[t._v("?<=")])])]),t._v(" "),s("h3",{attrs:{id:"开发-组件库时遇到的坑"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开发-组件库时遇到的坑"}},[t._v("#")]),t._v(" 开发 组件库时遇到的坑")]),t._v(" "),s("ol",[s("li",[t._v("iphone 访问 mac 本地服务器\n"),s("ol",[s("li",[t._v("mac 关闭防火墙(系统偏好设置 -> 安全性与隐私)")]),t._v(" "),s("li",[t._v("手机电脑在同一网络")]),t._v(" "),s("li",[t._v("手机直接通过 ip + 端口 就能访问")])])]),t._v(" "),s("li",[t._v("Safari 对渐变背景支持度不太好，渐变使用"),s("code",[t._v("transprant")]),t._v("更不友好")]),t._v(" "),s("li",[t._v("从 chrome56 开始，在 window、document 和 body 上注册的 "),s("code",[t._v("touchstart")]),t._v(" 和 "),s("code",[t._v("touchmove")]),t._v(" 事件处理函数，会默认为是 "),s("code",[t._v("passive: true")]),t._v(" "),s("ul",[s("li",[t._v("浏览器忽略 "),s("code",[t._v("preventDefault()")]),t._v(" 以便第一时间滚动。")]),t._v(" "),s("li",[t._v("历史：当浏览器首先对默认的事件进行响应的时候，要检查一下是否进行了默认事件的取消。这样就在响应滑动操作之前有那么一丝丝的耽误时间。")]),t._v(" "),s("li",[t._v("解决："),s("code",[t._v("window.addEventListener(‘touchmove’, func, { passive: false })")]),t._v(" 或者使用 "),s("code",[t._v("touch-action: none;")])])])]),t._v(" "),s("li",[s("code",[t._v("Ignored attempt to cancel a touchmove event with cancelable=false, for examp")]),t._v(" "),s("ul",[s("li",[t._v("产生原因：为防止性能问题，在Chrome中 touchmove 进行主动滚动时调用，不能通过 preventDefault 中断滚动。")]),t._v(" "),s("li",[t._v("解决方法："),s("code",[t._v("if (e.cancelable) { e.preventDefault() }")])])])]),t._v(" "),s("li",[t._v("IOS 的WebView有侧滑回退功能（在写Swiper时需要注意）\n"),s("ul",[s("li",[s("code",[t._v("UIWebView")]),t._v(" 在使用过程中对于内存开销比较大，而且加载速度也存在问题")]),t._v(" "),s("li",[s("code",[t._v("WKWebView")]),t._v(" 替代了 "),s("code",[t._v("UIWebView")]),t._v(" 解决了这两个问题。")])])]),t._v(" "),s("li",[t._v("Picker 和 Scroll 滚动时需要阻止触发页面滚动\n"),s("ul",[s("li",[t._v("滚动锁定要在滚动的第一帧完成")])])]),t._v(" "),s("li",[t._v("Swiper需要做方向锁定\n"),s("ul",[s("li",[t._v("方向锁定在滚动一定距离时触发")])])]),t._v(" "),s("li",[t._v("移动端：需要处理安全边界的问题\n"),s("ul",[s("li",[t._v("safari中使用 "),s("code",[t._v("fixed")]),t._v(" 需要配合 "),s("code",[t._v("viewport-fit")]),t._v(" 和 "),s("code",[t._v("safe-area-inset")])]),t._v(" "),s("li",[t._v("如果不解决安全边界问题 "),s("code",[t._v("fixed")]),t._v(" 内容将出现在安全边界外，比如 safari 的底部导航栏")])])])]),t._v(" "),s("h3",{attrs:{id:"end"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#end"}},[t._v("#")]),t._v(" End")]),t._v(" "),s("p",[t._v("最后。还是学习Fultter吧")]),t._v(" "),s("p",[t._v("本人的Fultter项目")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/zhongmeizhi/fultter-example-app",target:"_blank",rel:"noopener noreferrer"}},[t._v("fultter-example-app"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/zhongmeizhi/flutter-UI",target:"_blank",rel:"noopener noreferrer"}},[t._v("flutter-UI"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=n.exports}}]);